<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ТЛЕН-2000: Интерактив</title>
<style>
  body {
    background: black;
    color: #0f0;
    font-family: 'Courier New', monospace;
    padding: 20px;
    filter: contrast(1.2) brightness(0.9) saturate(0.7);
  }
  #story {
    max-width: 600px;
    margin: auto;
    white-space: pre-wrap;
  }
  .choice-button {
    background: #0f0;
    border: none;
    color: black;
    padding: 10px 20px;
    margin: 10px 5px 0 0;
    cursor: pointer;
    font-family: monospace;
    font-size: 14px;
  }
  .choice-button:hover {
    background: #0c0;
  }
</style>
</head>
<body>
<div id="story"></div>
<div id="choices"></div>

<script>
const storyEl = document.getElementById('story');
const choicesEl = document.getElementById('choices');

const audio = new Audio('postpunk.mp3');
audio.loop = true;

function playAudio() {
  if (audio.paused) {
    audio.play().catch(() => {});
  }
}

const storyData = {
  start: {
    text: `Ты стоишь на автобусной остановке. Всё вокруг серо и тихо. Туман опускается, тени сгущаются, а в голове крутятся мысли о заброшенном районе...`,
    choices: [
      { text: 'Подняться на этаж в соседний подъезд', next: 'goUpstairs' },
      { text: 'Осмотреться вокруг', next: 'lookAround' },
      { text: 'Подождать автобус', next: 'waitBus' }
    ]
  },
  goUpstairs: {
    text: `Ты заходишь в подъезд. Стены облуплены, пахнет сыростью и старыми газетами. Лестница скрипит под ногами.`,
    choices: [
      { text: 'Идти в коммуналку', next: 'communal' },
      { text: 'Посмотреть во двор через окно', next: 'yard' },
      { text: 'Спуститься обратно на улицу', next: 'start' }
    ]
  },
  lookAround: {
    text: `Вокруг ты видишь облезлые стены, ржавые лавочки и пустые бутылки под ногами. Холодный ветер играет мусором.`,
    choices: [
      { text: 'Подняться на этаж', next: 'goUpstairs' },
      { text: 'Сесть на скамейку и подумать', next: 'sitBench' },
      { text: 'Пойти к ларьку', next: 'kiosk' }
    ]
  },
  waitBus: {
    text: `Автобус не приходит. Тишина становится давящей. Ты чувствуешь, как время растягивается в бесконечность.`,
    choices: [
      { text: 'Повернуться и уйти домой', next: 'end' },
      { text: 'Вспомнить детство и место', next: 'nostalgia' }
    ]
  },
  communal: {
    text: `В коммуналке темно и пахнет плесенью. Из старого телевизора доносится бормотание новостей, а вокруг разбросаны пустые бутылки.`,
    choices: [
      { text: 'Послушать телевизор внимательнее', next: 'tv' },
      { text: 'Выйти обратно в подъезд', next: 'goUpstairs' }
    ]
  },
  yard: {
    text: `Через грязное окно ты видишь двор с ржавыми гаражами и пустыми бутылками. Где-то вдали мерцает слабый свет фонаря.`,
    choices: [
      { text: 'Спуститься во двор', next: 'courtyard' },
      { text: 'Вернуться в подъезд', next: 'goUpstairs' }
    ]
  },
  sitBench: {
    text: `Ты садишься на холодную скамейку. Память рисует давно забытые лица и звуки детства.`,
    choices: [
      { text: 'Встать и подняться на этаж', next: 'goUpstairs' },
      { text: 'Закрыть глаза и просто слушать тишину', next: 'listenSilence' }
    ]
  },
  kiosk: {
    text: `Ларёк закрыт. На прилавке валяется пустая пачка сигарет и старый журнал.`,
    choices: [
      { text: 'Осмотреться вокруг ларька', next: 'aroundKiosk' },
      { text: 'Вернуться на остановку', next: 'start' }
    ]
  },
  tv: {
    text: `На экране мелькают кадры давно забытых новостей — аварии, исчезнувшие люди, искажённые лица.`,
    choices: [
      { text: 'Выключить телевизор', next: 'communal' },
      { text: 'Попытаться дозвониться на горячую линию', next: 'hotline' }
    ]
  },
  courtyard: {
    text: `Во дворе пахнет сыростью и гарью. В углу кто-то оставил брошенный мяч и пару разбитых бутылок.`,
    choices: [
      { text: 'Подойти к мячy', next: 'ball' },
      { text: 'Посмотреть на гаражи', next: 'garages' },
      { text: 'Вернуться в подъезд', next: 'goUpstairs' }
    ]
  },
  listenSilence: {
    text: `Тишина кажется оглушающей. В голове начинает звучать шёпот, но ты не можешь понять слов.`,
    choices: [
      { text: 'Открыть глаза и встать', next: 'start' },
      { text: 'Попытаться прислушаться', next: 'whisper' }
    ]
  },
  aroundKiosk: {
    text: `Рядом с ларьком валяется разбитая бутылка и пачка старых газет с выцветшими заголовками.`,
    choices: [
      { text: 'Взять газету и прочитать', next: 'readNewspaper' },
      { text: 'Вернуться к ларьку', next: 'kiosk' }
    ]
  },
  hotline: {
    text: `Номер занят. Тишина в трубке. Ты чувствуешь, как холод стекает по спине.`,
    choices: [
      { text: 'Положить трубку', next: 'communal' },
      { text: 'Попытаться снова', next: 'hotline' }
    ]
  },
  ball: {
    text: `Мяч покрыт пылью и грязью, но он словно живёт своей собственной жизнью, немного подрагивая на ветру.`,
    choices: [
      { text: 'Взять мяч и пойти домой', next: 'end' },
      { text: 'Оставить мяч и вернуться в подъезд', next: 'goUpstairs' }
    ]
  },
  garages: {
    text: `Гаражи покрыты ржавчиной, двери кое-где приоткрыты, а внутри тьма, как будто кто-то всё ещё живёт там.`,
    choices: [
      { text: 'Зайти в один из гаражей', next: 'garageInside' },
      { text: 'Вернуться во двор', next: 'courtyard' }
    ]
  },
  garageInside: {
    text: `Внутри гаража темно и пахнет маслом и бензином. На полу валяется старый чемодан, слегка приоткрытый.`,
    choices: [
      { text: 'Открыть чемодан', next: 'suitcase' },
      { text: 'Выйти из гаража', next: 'courtyard' }
    ]
  },
  suitcase: {
    text: `В чемодане лежат старые письма, пожелтевшие фотографии и ключи от неизвестных дверей.`,
    choices: [
      { text: 'Взять письма и читать', next: 'readLetters' },
      { text: 'Закрыть чемодан и выйти', next: 'courtyard' }
    ]
  },
  readLetters: {
    text: `Письма рассказывают о потерянных мечтах, разбитых семьях и тайнах, скрываемых за фасадом города.`,
    choices: [
      { text: 'Закрыть письма и выйти', next: 'courtyard' },
      { text: 'Продолжить читать', next: 'readMore' }
    ]
  },
  readMore: {
    text: `Чем дальше ты читаешь, тем сильнее ощущение безысходности и одиночества. Слова словно тянут тебя вниз.`,
    choices: [
      { text: 'Закрыть чемодан и уйти', next: 'end' }
    ]
  },
  nostalgia: {
    text: `Ты вспоминаешь детство — заброшенные дворы, первые друзья, запах свежего хлеба и звуки тёплого лета.`,
    choices: [
      { text: 'Попытаться вернуть те чувства', next: 'start' },
      { text: 'Остаться стоять на остановке', next: 'waitBus' }
    ]
  },
  end: {
    text: `Ты уходишь прочь из этого забытого места, чувствуя, что тлен и безысходность останутся здесь, а ты — где-то между памятью и настоящим.`,
    choices: []
  }
};

let currentNode = 'start';

function renderNode() {
  const node = storyData[currentNode];
  storyEl.textContent = node.text;
  choicesEl.innerHTML = '';
  if (node.choices.length === 0) {
    const endMessage = document.createElement('p');
    endMessage.textContent = 'История завершена. Спасибо за прохождение.';
    choicesEl.appendChild(endMessage);
    audio.pause();
    return;
  }
  node.choices.forEach(choice => {
    const btn = document.createElement('button');
    btn.className = 'choice-button';
    btn.textContent = choice.text;
    btn.onclick = () => {
      currentNode = choice.next;
      renderNode();
      playAudio();
    };
    choicesEl.appendChild(btn);
  });
}

renderNode();
</script>
</body>
</html>
